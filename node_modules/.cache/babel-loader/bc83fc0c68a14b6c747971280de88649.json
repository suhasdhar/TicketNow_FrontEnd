{"ast":null,"code":"import LoadTicket from './LoadTicket.vue';\nexport default {\n  components: {\n    LoadTicket\n  },\n\n  data() {\n    return {\n      alert: false,\n      category: '',\n      creationDone: false,\n      description: null,\n      fetched: '',\n      priority: '',\n      rawTicket: {\n        'description': '',\n        'priority': '',\n        'title': ''\n      },\n      selected: '',\n      title: null,\n      viewTicket: false\n    };\n  },\n\n  name: 'CreateTicket',\n  props: {\n    admin: Boolean,\n    id: String,\n    msg: String\n  },\n  // eslint-disable-next-line sort-keys\n  methods: {\n    back() {\n      this.viewTicket = false;\n      this.gettickets();\n    },\n\n    async create() {\n      this.rawTicket.title = this.title;\n      this.rawTicket.description = this.description;\n      this.rawTicket.priority = this.priority;\n\n      if (this.title === null || this.description === null) {\n        this.alert = true;\n        return;\n      } // eslint-disable-next-line\n\n\n      console.log(typeof this.priority);\n      await fetch('http://localhost:8080/ticket-now/add-new-ticket', {\n        body: JSON.stringify({\n          'description': this.description,\n          'idof_createdBy': this.id,\n          'priority': this.priority,\n          'title': this.title\n        }),\n        headers: {\n          'Accept': 'application/json, text/plain',\n          'Content-Type': 'application/json;charset=UTF-8'\n        },\n        method: 'POST',\n        mode: 'cors'\n      }).then(res => res.json()). // eslint-disable-next-line\n      catch(error => console.log(error));\n      this.creationDone = true;\n    },\n\n    async gettickets() {\n      if (this.admin) {\n        await fetch('http://localhost:8080/ticket-now/admin/fetch-all-tickets', {\n          method: 'GET',\n          mode: 'cors'\n        }).then(res => res.json()).then(data => {\n          this.fetched = data; // eslint-disable-next-line\n\n          console.log(this.admin);\n        });\n      } else {\n        await fetch('http://localhost:8080/ticket-now/fetch-all-tickets', {\n          headers: {\n            'Accept': 'application/json,text/plain',\n            'Content-Type': 'application/json;charset=UTF-8',\n            'userid': this.id\n          },\n          method: 'POST',\n          mode: 'cors'\n        }).then(res => res.json()).then(data => {\n          this.fetched = data;\n        }).catch(error => {\n          // eslint-disable-next-line\n          console.log(error);\n        });\n      }\n    },\n\n    view(item) {\n      this.selected = item;\n      this.viewTicket = true; // eslint-disable-next-line\n\n      console.log(this.selected);\n    }\n\n  },\n\n  mounted() {\n    if (this.msg === 'view') {\n      // eslint-disable-next-line\n      this.gettickets();\n      this.viewTicket = false;\n    } // eslint-disable-next-line\n\n\n    console.log(this.id + \" ***\");\n  }\n\n};","map":{"version":3,"mappings":"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","names":["LoadTicket","components","data","alert","category","creationDone","description","fetched","priority","rawTicket","selected","title","viewTicket","name","props","admin","Boolean","id","String","msg","methods","back","gettickets","create","console","log","fetch","body","JSON","stringify","headers","method","mode","then","res","json","catch","error","view","item","mounted"],"sourceRoot":"","sources":["/Users/suhasdhar/Desktop/Development/TicketNow_front/ticket_now/src/components/CreateTicket.vue"],"sourcesContent":["<template>\n<div>\n<!--if the msg prop is create the below code renders-->\n<div  v-if=\"this.msg==='create' && !creationDone\">\n<input type=\"text\"  value=\"Title\" disabled> <input type=\"Textbox\"  placeholder=\"title\"  v-model=\"title\" name=\"\" id=\"\"><br>\n\n<input type=\"text\"  value=\"Description\" disabled > <input type=\"Textarea\"  placeholder=\"description\"  v-model=\"description\" name=\"\" id=\"\"><br  v-if=\"this.admin===true\">\n\n<input  v-if=\"this.admin===true\" type=\"text\"  value=\"Category\" disabled >\n\n<select v-if=\"this.admin===true\" id=\"Category\" name=\"category\" v-model=\"category\">\n    <option value=\"Hardware\">Hardware</option>\n    <option value=\"Software\">Software</option>\n    <option value=\"Operations\">Operations</option>\n    <option value=\"Human Resources\">Human Resources</option>\n\n</select> <br v-if=\"this.admin===true\">\n\n<input v-if=\"this.admin===true\" type=\"text\" value=\"Priority\" disabled >\n\n<select  v-if=\"this.admin===true\" id=\"Category\" name=\"priority\" v-model=\"priority\">\n    <option value=\"P1\">P1</option>\n    <option value=\"P2\">P2</option>\n    <option value=\"P3\">P3</option>\n    <option value=\"P4\">P4</option>\n  </select> <br>\n<!-- <input type=\"text\"  value=\"Creation Date\" disabled > <input type=\"Date\"  placeholder=\"creationDate\"  v-model=\"creationDate\" name=\"\" id=\"\"><br>\n<input type=\"text\"  value=\"Creation time\" disabled > <input type=\"Time\"  placeholder=\"creationTime\"  v-model=\"creationTime\" name=\"\" id=\"\"><br> -->\n<div v-if=\"alert\" id=\"alert\"> Title and Description cant be empty </div>\n<button @click=\"create()\">Submit</button>\n</div>\n\n<div  v-else-if=\"this.msg==='create' && creationDone\"> Ticket created click on view ticket to see it</div>\n\n<div v-else>\n  <table v-if=\"!this.viewTicket\">\n  <tr> <th>Ticket ID</th> <th>Title</th><th>Status</th><th>Description</th><th>Category</th></tr>\n  <tr id='row' v-for=\"(item) in fetched\" :key=\"item.userid\" @click=\"view(item)\"> <td>{{item.ticketId}} </td><td>{{item.title}} </td><td id=\"Status\">{{item.status}} </td> <td>{{item.description}} </td><td>{{item.category}} </td></tr>\n  </table>\n  <div v-else>\n    <span id='back' @click=\"back()\">Back</span>\n    <LoadTicket :ticket=\"this.selected\" :isadmin=\"admin\" :id=\"this.id\" />\n  </div>\n</div>\n\n</div>\n</template>\n\n<script>\nimport LoadTicket from './LoadTicket.vue';\nexport default {\n  components: {\n    LoadTicket\n  },\n  data () {\n\n    return {\n      alert: false,\n      category: '',\n      creationDone: false,\n      description: null,\n      fetched: '',\n      priority: '',\n      rawTicket: {'description': '',\n        'priority': '',\n        'title': ''},\n      selected: '',\n      title: null,\n      viewTicket: false,\n\n    };\n\n  },\n  name: 'CreateTicket',\n  props: {\n    admin: Boolean,\n    id: String,\n    msg: String,\n\n  },\n  // eslint-disable-next-line sort-keys\n  methods: {\n    back () {\n\n      this.viewTicket = false;\n      this.gettickets();\n\n    },\n    async create () {\n\n      this.rawTicket.title = this.title;\n      this.rawTicket.description = this.description;\n      this.rawTicket.priority = this.priority;\n      if (this.title === null || this.description === null) {\n\n        this.alert = true;\n        return;\n\n      }\n      // eslint-disable-next-line\n      console.log(typeof this.priority);\n      await fetch(\n        'http://localhost:8080/ticket-now/add-new-ticket',\n        {body: JSON.stringify({\n          'description': this.description,\n          'idof_createdBy': this.id,\n          'priority': this.priority,\n          'title': this.title,\n        }),\n        headers: {'Accept': 'application/json, text/plain',\n          'Content-Type': 'application/json;charset=UTF-8'},\n        method: 'POST',\n        mode: 'cors'}\n      ).then((res) => res.json()).\n      // eslint-disable-next-line\n        catch((error) => console.log(error));\n      this.creationDone = true;\n\n    },\n    async gettickets () {\n\n      if (this.admin) {\n\n        await fetch(\n          'http://localhost:8080/ticket-now/admin/fetch-all-tickets',\n          {\n            method: 'GET',\n            mode: 'cors'\n          }\n        ).then((res) => res.json()).\n          then((data) => {\n\n            this.fetched = data;\n            // eslint-disable-next-line\n            console.log(this.admin);\n\n          });\n\n      } else {\n\n        await fetch(\n          'http://localhost:8080/ticket-now/fetch-all-tickets',\n          {\n            headers: {'Accept': 'application/json,text/plain',\n              'Content-Type': 'application/json;charset=UTF-8',\n              'userid': this.id},\n            method: 'POST',\n            mode: 'cors'\n          }\n        ).then((res) => res.json()).\n          then((data) => {\n\n            this.fetched = data;\n\n          }).\n          catch((error) => {\n\n            // eslint-disable-next-line\n          console.log(error);\n          });\n\n      }\n\n    },\n    view (item) {\n\n      this.selected = item;\n      this.viewTicket = true;\n      // eslint-disable-next-line\n      console.log(this.selected)\n\n    },\n\n  },\n  mounted () {\n\n    if (this.msg === 'view') {\n\n      // eslint-disable-next-line\n      this.gettickets();\n      this.viewTicket = false;\n\n    }\n    // eslint-disable-next-line\n    console.log(this.id+\" ***\")\n\n  },\n};\n\n</script>\n\n<style scoped>\ninput{\n\n  width : 200px;\n}\nselect{\n\nwidth : 200px;\n}\nbutton{\n\nwidth : 200px;\n}\ntable{\n  border: solid;\n align-content: center;\n}\ntd {\n  border: 1px solid black;\n  width: 100px;\n  height:10px;\n  max-width: 600px;\n overflow: hidden;\n text-overflow: ellipsis;\n white-space: nowrap;\n padding: 10px;\n}\n\n#row:hover {\n  cursor: pointer;\n  background-color: rgb(180, 213, 243)\n}\n#back:hover {\n  cursor: pointer;\n  background-color: rgb(180, 213, 243)\n}\n.id{\n  color: red;\n}\n</style>\n"]},"metadata":{},"sourceType":"module"}